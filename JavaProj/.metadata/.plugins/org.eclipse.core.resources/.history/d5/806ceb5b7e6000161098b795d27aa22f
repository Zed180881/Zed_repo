<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Commodity Order Management</title>
</head>
<body>
	<h3>Add commodity order:</h3>
	<form:form action="/admin/order" method="post" modelAttribute="commodityOrder">
		<form:input path="id" type="hidden"/>
		<label for="user">User:</label><br>
		<form:select path="userName" id="userName">
			<c:forEach items="${users}" var="user">
				<option value="${user.fullName}">${user.fullName}</option>
			</c:forEach>
		</form:select><br>		
		<label for="orderStatus">Order Status:</label><br>
		<form:select path="orderStatus" id="orderStatus">
			<c:forEach items="${orderStatuses}" var="orderStatus">
				<option value="${orderStatus.orderStatusName}">${orderStatus.orderStatusName}</option>
			</c:forEach>
		</form:select><br>
		<label for="orderDate">Order Date:</label><br> 
		<form:input type="date" path="orderDate" id="orderDate" required="true"/><br>
		<label for="payDate">Pay Date:</label><br> 
		<input type="text" name="payDate" placeholder="dd.mm.yyyy"><br>
		<label for="deliveryDate">Delivery Date:</label><br> 
		<input type="text" name="deliveryDate" placeholder="dd.mm.yyyy"><br>
		<label for="commodityModel1">Commodities List:</label><br>
		<select name="commodityModel1">			
			<c:forEach items="${commodities}" var="commodity">
				<option value="${commodity.model}">${commodity.model}</option>
			</c:forEach>
		</select><br>
		<select name="commodityModel2">
			<option value=""></option>
			<c:forEach items="${commodities}" var="commodity">
				<option value="${commodity.model}">${commodity.model}</option>
			</c:forEach>
		</select><br>
		<select name="commodityModel3">
			<option value=""></option>
			<c:forEach items="${commodities}" var="commodity">
				<option value="${commodity.model}">${commodity.model}</option>
			</c:forEach>
		</select><br>
		<select name="commodityModel4">
			<option value=""></option>
			<c:forEach items="${commodities}" var="commodity">
				<option value="${commodity.model}">${commodity.model}</option>
			</c:forEach>
		</select><br>
		<select name="commodityModel5">
			<option value=""></option>
			<c:forEach items="${commodities}" var="commodity">
				<option value="${commodity.model}">${commodity.model}</option>
			</c:forEach>
		</select><br>		
		<input type="submit" value="Add order">
	</form:form><br>
	<h3>Current orders:</h3>
	<table>
		<tr>
			<th>User name</th>
			<th>Order Status</th>
			<th>Order Sum</th>
			<th>Order Date</th>
			<th>Pay Date</th>
			<th>Delivery Date</th>
			<th>Commodities</th>				
		</tr>
	<c:forEach items="${commodityOrders}" var="order">
		<tr>
			<td>${order.user.fullName}</td>
			<td>${order.orderStatus.orderStatusName}</td>
			<td>${order.sum}</td>
			<td>${order.orderDate}</td>
			<td>${order.payDate}</td>
			<td>${order.deliveryDate}</td>
			<td>
				<ul>
					<c:forEach items="${order.commodities}" var="commodity">
						<li>${commodity.model}</li>
					</c:forEach>
				</ul>
			</td>
			<td><a href="/admin/order/delete/${order.id}">delete</a></td>
			<td><a href="/admin/order/edit/${order.id}">edit</a></td>			
		</tr>			
	</c:forEach>	
	</table><br>
	<a href="/admin"><b><i>Back to administrator panel</i></b></a>	
</body>
</html>